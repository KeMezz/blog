---
emoji: ğŸ™‹
title: Animated APIë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì•Œì•„ë‘ë©´ ì¢‹ì„ ê²ƒë“¤
date: "2023-01-16"
tags: ["ê°œë°œ", "react-native", "animated"]
slug: 6
---

## styleì˜ transform ì†ì„±

```tsx
<View style={{ transform: [{ translateY: 200 }, { rotateX: "180deg" }] }} />
```

ë¦¬ì•¡íŠ¸ ë„¤ì´í‹°ë¸Œì—ë„ CSSì™€ transformê³¼ ë¹„ìŠ·í•œ ì—­í• ì„ í•˜ëŠ” ìŠ¤íƒ€ì¼ ì†ì„±ì´ ìˆìœ¼ë‚˜, ì‘ì„±ë°©ì‹ì´ ì•½ê°„ ë‹¤ë¥´ë‹¤. ë¦¬ì•¡íŠ¸ ë„¤ì´í‹°ë¸Œì˜ transformì€ ì¼ë°˜ì ìœ¼ë¡œëŠ” ë°°ì—´ í˜•íƒœë¡œ ì…ë ¥ë˜ë©°, ê° transformì˜ ì†ì„±ë³„ë¡œ ë¶„ë¦¬ëœ ì˜¤ë¸Œì íŠ¸ë¥¼ ë³´ë‚´ì£¼ì–´ì•¼ í•œë‹¤ëŠ” ë£°ì´ ìˆë‹¤.

[Transforms | React Native Docs](https://reactnative.dev/docs/0.70/transforms)

## Animated Value ì„ ì–¸

```jsx
const Y = new Animated.Value(0);
```

animationì„ ì ìš©í•˜ê³  ì‹¶ì€ valueëŠ” Animated APIë¥¼ í†µí•´ì„œë§Œ ì„ ì–¸í•œë‹¤.

```javascript
const position = new Animated.ValueXY({ x: 0, y: 0 });
```

`ValueXY`ë¥¼ í†µí•´ ë‘ ê°œì˜ ê°’ì„ ë™ì‹œì— ì§€ì •í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.

## Animated Value ìˆ˜ì •

```javascript
const moveUp = () => {
  Animated.spring(Y, {
    toValue: 200,
    useNativeDriver: true,
  });
};
```

Animated APIë¥¼ í†µí•´ ì„ ì–¸í•œ valueëŠ” ì§ì ‘ ìˆ˜ì •í•  ìˆ˜ ì—†ê³ , ìˆ˜ì •ì€ APIê°€ ì œê³µí•˜ëŠ” ë°©ë²•ì„ í†µí•´ ì´ë£¨ì–´ì§„ë‹¤. ì• ë‹ˆë©”ì´ì…˜ì„ ì„¤ì •í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” ë©”ì†Œë“œëŠ” decay, timing, springì´ ìˆìœ¼ë©°, ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ì— timingì„ í†µí•´ ì• ë‹ˆë©”ì´ì…˜ì„ êµ¬í˜„í•˜ê²Œ ëœë‹¤.

## timingê³¼ easingì„ ì´ìš©í•œ ë¬¼ë¦¬ íš¨ê³¼ êµ¬í˜„

```jsx
import { Easing } from "react-native";
/* ... */
const moveUp = () => {
  Animated.timing(Y, {
    toValue: 200,
    useNativeDriver: true,
    easing: Easing.elastic(200),
  });
};
```

timingì„ í†µí•´ ì• ë‹ˆë©”ì´ì…˜ì„ ì¡°ì‘í• ë•Œ, easing ì˜µì…˜ì„ í†µí•´ ë‹¤ì–‘í•œ ì• ë‹ˆë©”ì´ì…˜ ë¬¼ë¦¬íš¨ê³¼ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. ê³µì‹ë¬¸ì„œì— Easingì´ ì œê³µí•˜ëŠ” ê° ì˜µì…˜ì— ëŒ€í•œ ì„¤ëª…ì´ ì˜ ì‘ì„±ë˜ì–´ ìˆë‹¤.

[Easing | React Native Docs](https://reactnative.dev/docs/easing)

## Animated ì—˜ë¦¬ë¨¼íŠ¸ ìƒì„±

```jsx
<Animated.View style={{ transform: [{ translateY: 200 }] }} />
```

ì–´ëŠ ì—˜ë¦¬ë¨¼íŠ¸ë“  Animated APIì— ì˜í•´ ì»¨íŠ¸ë¡¤ í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. Animated APIë¥¼ í†µí•´ í•´ë‹¹ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ì• ë‹ˆë©”ì´ì…˜ì´ ì ìš©ë  ìˆ˜ ìˆëŠ” ê·¸ë¦‡ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ì–´ì•¼ í•œë‹¤.

```jsx
const Box = styled.TouchableOpacity``;
const AnimatedBox = Animated.createAnimatedComponent(Box);
```

ê¸°ë³¸ì ìœ¼ë¡œ Animatedì— í¬í•¨ë˜ì–´ ìˆì§€ ì•Šì€ ì—˜ë¦¬ë¨¼íŠ¸ë“¤ì€ `createAnimatedComponent` ë©”ì†Œë“œë¥¼ í†µí•´ ìƒˆë¡­ê²Œ ë§Œë“¤ ìˆ˜ë„ ìˆë‹¤. styled-componentsë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë¼ë©´ ìœ„ì™€ ê°™ì´ ì§ì ‘ ì‘ì„±í•œ styled-componentsë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë„˜ê²¨ì„œ ë§Œë“¤ ìˆ˜ë„ ìˆë‹¤.

## useRefë¥¼ í†µí•œ Animated.Value ì´ˆê¸°í™” ë°©ì§€

```jsx
const Y = new Animated.Value(0);
const moveUp = () => {
  Animated.timing(Y, {
    toValue: up ? 200 : -200,
    useNativeDriver: true,
  }).start(toggleUp);
};
return (
  <Container>
    <Pressable onPress={moveUp}>
      <Animated.View style={{ transform: [{ translateY: Y }] }} />
    </Pressable>
  </Container>
);
```

Animated.Valueë¥¼ ì›ì‹œê°’ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•˜ê²Œ ë˜ë©´ ë¬¸ì œê°€ ë°œìƒí•˜ëŠ”ë°, ë¦¬ì•¡íŠ¸ê°€ ë¦¬ë Œë”ë•Œë§ˆë‹¤ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë¥¼ ì§€ì •í–ˆë˜ ì´ˆê¸°ê°’ìœ¼ë¡œ ë˜ëŒë ¤ë²„ë¦°ë‹¤ëŠ” ì ì´ë‹¤. ìœ„ì²˜ëŸ¼ ì‘ì„±í–ˆì„ë•Œ Yê°’ì€ 200 í˜¹ì€ -200ìœ¼ë¡œ ë³€ê²½ëœ ì§í›„ ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ì— ì˜í•´ ì¦‰ì‹œ 0ìœ¼ë¡œ ë˜ëŒì•„ê°€ëŠ” ë¬¸ì œê°€ ìˆë‹¤.

```jsx
const Y = useRef(new Animated.Value(0)).current;
const moveUp = () => {
  Animated.timing(Y, {
    toValue: up ? 200 : -200,
    useNativeDriver: true,
  }).start(toggleUp);
};
return (
  <Container>
    <Pressable onPress={moveUp}>
      <Animated.View style={{ transform: [{ translateY: Y }] }} />
    </Pressable>
  </Container>
);
```

ì´ëŸ´ë•Œ useRef í›…ì„ ì´ìš©í•˜ë©´ Animated.Valueê°€ ì´ˆê¸°í™” ë˜ëŠ” ê²ƒì„ ë§‰ì„ ìˆ˜ ìˆë‹¤. useRef í›…ìœ¼ë¡œ ê°ì‹¸ì£¼ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë˜ë”ë¼ë„ ê·¸ ê°’ì„ ìœ ì§€í•  ìˆ˜ ìˆê²Œ ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

```jsx
Y.addListener(() => console.log(Y));
```

ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ì— ëŒ€í•œ ì˜í–¥ì—ì„œ ë²—ì–´ë‚¬ê¸° ë•Œë¬¸ì— ì¼ë°˜ì ì¸ `console.log`ë¡œëŠ” ì œí•œëœ ê°’(ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë” ë  ë•Œì˜ ê°’)ë§Œ í™•ì¸í•  ìˆ˜ ìˆëŠ”ë°, `addListener` ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ë©´ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°”ë€ŒëŠ” ê°’ì„ í™•ì¸í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.

> ì»´í¬ë„ŒíŠ¸ê°€ íŠ¹ì • ì •ë³´ë¥¼ 'ê¸°ì–µ'í•˜ê²Œ í•˜ê³  ì‹¶ì§€ë§Œ, ë™ì‹œì— ê·¸ ì •ë³´ë¥¼ í†µí•´ ìƒˆë¡œìš´ ë Œë”ë¥¼ ìœ ë°œí•˜ê²Œ í•˜ê³  ì‹¶ì§€ ì•Šì„ ë•Œ refë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

[Referencing Values with Refs | React Docs](https://beta.reactjs.org/learn/referencing-values-with-refs)

## interpolation

interpolateëŠ” ë§ë¶™ì´ë‹¤, ì‚½ì…í•˜ë‹¤, ë³´ê°„í•˜ë‹¤ ë“±ì˜ ëœ»ì„ ê°€ì§„ ë‹¨ì–´ì¸ë°, ì• ë‹ˆë©”ì´ì…˜ì—ì„œ interpolationë„ ê°’ì„ ë³´ê°„í•œë‹¤ëŠ” ëœ»ì´ë‹¤. í•˜ë‚˜ì˜ ì• ë‹ˆë©”ì´ì…˜ì— ëŒ€í•œ ê¸°ì¤€ê°’ì„ ì„¤ì •í•´ë‘ê³ , ì´ì™€ ë™ì‹œì— ì´ë£¨ì–´ì§€ê²Œ í•˜ê³  ì‹¶ì€ ë‹¤ë¥¸ ì• ë‹ˆë©”ì´ì…˜ì— ëŒ€í•œ ê°’ì„ ë¹„ìœ¨ì— ë§ê²Œ ê³„ì‚°í•˜ì—¬ ì‚¬ì´ì˜ ê°’ë“¤ì„ ë³´ê°„í•œë‹¤ëŠ” ëœ»ì„ ê°€ì§€ê³  ìˆë‹¤ê³  ë³´ë©´ ë  ë“¯ í•˜ë‹¤.

```jsx
const Y = useRef(new Animated.Value(200)).current;
const opacity = Y.interpolate({
  inputRange: [-300, 0, 300],
  outputRange: [1, 0, 1],
});
```

ì•„ê¹Œì™€ ë™ì¼í•œ ì˜ˆë¬¸ì—ì„œ opacityë¥¼ ë™ì‹œì— ìˆ˜ì •í•œë‹¤ê³  ê°€ì •í•´ë´¤ì„ ë•Œ, ìœ„ì™€ ê°™ì´ interpolationì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. opacityì˜ `Animated.Value`ë¥¼ ìƒˆë¡­ê²Œ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, Yê°’ì˜ ì›€ì§ì„ì— ë”°ë¼ì„œ opacityë„ ë™ì‹œì— ë°”ë€Œê²Œ í•´ë‹¬ë¼ê³  ì„ ì–¸í•œ ëª¨ì–‘ì´ ëœë‹¤. ìš°ë¦¬ê°€ ê¸°ì¤€ê°’ë§Œ ì œì‹œí•˜ë©´ `interpolate` ë©”ì†Œë“œê°€ ì•Œì•„ì„œ ì‚¬ì´ì˜ ê°’ë“¤ì„ ë³´ê°„í•´ì£¼ëŠ” ê²ƒì´ë‹¤.

![1.gif]('./1.gif')

`inputRange`ëŠ” ê¸°ì¡´ Yì˜ ê°’ì´ ì›€ì§ì´ëŠ” ê²ƒì„ ì „ì œë¡œ í•˜ê³  ìˆìœ¼ë©°, ì´ë¥¼ í†µí•´ ìƒˆë¡­ê²Œ ë§Œë“¤ì–´ì§ˆ`outputRange`ê°€ opacityì˜ ê°’ì´ ëœë‹¤. ì¦‰, Yê°€ -300ì¼ë•Œ opacityëŠ” 1ì´ì—ˆë‹¤ê°€, Yê°€ 0ì¼ë•ŒëŠ” opacityê°€ 0ì´ ë˜ê³ , ë‹¤ì‹œ Yê°€ 300ì´ ë˜ë©´ opacityë„ ë‹¤ì‹œ 1ë¡œ ë°”ë€ë‹¤. ë‘ ë°°ì—´ì˜ ê¸¸ì´ëŠ” ë°˜ë“œì‹œ ê°™ì•„ì•¼ í•œë‹¤.

```jsx
const Y_POSITION = useRef(new Animated.Value(200)).current;
const rotateY = Y_POSITION.interpolate({
  inputRange: [-200, 200],
  outputRange: ["-360deg", "360deg"],
});
```

ëŒ€ë°•ì¸ê±´ string í˜•íƒœì˜ ìŠ¤íƒ€ì¼ ì†ì„±ë“¤ë„ ì•Œì•„ì„œ interpolateë¥¼ í•´ì¤€ë‹¤ëŠ” ì ì´ë‹¤.

```jsx
const Y_POSITION = useRef(new Animated.Value(200)).current;
const rotateY = Y_POSITION.interpolate({
  inputRange: [-200, 200],
  outputRange: ["-360deg", "360deg"],
  extrapolate: "clamp",
});
```

interpolateì˜ íŠ¹ì„± ì¤‘ í•˜ë‚˜ëŠ”, inputRangeì™€ outputRangeë¥¼ ë²—ì–´ë‚œ ê°’ì— ëŒ€í•´ì„œë„ ì• ë‹ˆë©”ì´ì…˜ì„ ì œê³µí•´ì¤€ë‹¤ëŠ” ê²ƒì´ë‹¤. ë§Œì•½ ë³¸ì¸ì´ ì§€ì •í•œ ë§Œí¼ë§Œ interpolateê°€ ì‘ë™í•˜ê¸°ë¥¼ ì›í•œë‹¤ë©´ extrapolate ì˜µì…˜ìœ¼ë¡œ "clamp"ë¥¼ ì„¤ì •í•´ì£¼ë©´ ì´ë¥¼ ë§‰ì•„ì¤„ ìˆ˜ë„ ìˆë‹¤.

[Interpolation | React Native Docs](https://reactnative.dev/docs/animations#interpolation)

## ValueXYì— ëŒ€í•œ íŒ

```jsx
const position = useRef(new Animated.ValueXY({ x: 0, y: 200 })).current;
const moveUp = () => {
  Animated.timing(position, {
    toValue: { x: 0, y: 0 },
    useNativeDriver: true,
  }).start(toggleUp);
};
return (
  <Container>
    <Pressable onPress={moveUp}>
      <AnimatedBox
        style={{
          transform: [{ translateX: position.x }, { translateY: position.y }],
        }}
      />
    </Pressable>
  </Container>
);
```

ValueXYë¥¼ í†µí•´ valueë¥¼ ì„ ì–¸í•˜ê²Œ ë˜ì—ˆì„ ë•Œ, `Animated.timing`ì˜ `toValue`ë¥¼ í†µí•´ xì™€ yì˜ ê°’ì„ ë³„ë„ë¡œ ì§€ì •í•  ìˆ˜ ìˆê²Œ ëœë‹¤. ë§Œì•½ ë³„ë„ë¡œ ì§€ì •í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì—ëŠ” xì™€ yì˜ ê°’ì´ ë™ì¼í•˜ê²Œ ë³€ê²½ëœë‹¤.

```jsx
const position = useRef(new Animated.ValueXY({ x: 0, y: 200 })).current;
position.addListener(() => console.log(position.getTranslateTransform));
// [{"translateX": 0}, {"translateY": 200}]
return (
  <Container>
    <Pressable onPress={moveUp}>
      <AnimatedBox
        style={{
          borderRadius,
          backgroundColor,
          transform: [...position.getTranslateTransform()],
        }}
      />
    </Pressable>
  </Container>
);
```

Animated Valueì˜ ë©”ì†Œë“œ ì¤‘ í•˜ë‚˜ì¸ `getTranslateTransform()`ì„ ì´ìš©í•˜ë©´ í•´ë‹¹ Animated ê°’ì„ ë¦¬ì•¡íŠ¸ ë„¤ì´í‹°ë¸Œì˜ transform ë°°ì—´ í˜•íƒœ ê·¸ëŒ€ë¡œ ë°›ì•„ë³¼ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ìœ„ì™€ ê°™ì´ ê°„ê²°í•˜ê²Œ ì‘ì„±í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•´ì§„ë‹¤.

## ì—¬ëŸ¬ ê°œì˜ ì• ë‹ˆë©”ì´ì…˜ì„ ì—°ë‹¬ì•„ì„œ ì‹¤í–‰í•˜ê¸° (sequence)

![sequence animation.gif]('./2.gif')

```jsx
const { width: WINDOW_WIDTH, height: WINDOW_HEIGHT } = Dimensions.get("window");

const topLeft = Animated.timing(position, {
  toValue: { x: -WINDOW_WIDTH / 2 + 100, y: -WINDOW_HEIGHT / 2 + 100 },
  useNativeDriver: true,
});
const bottomLeft = Animated.timing(position, {
  toValue: { x: -WINDOW_WIDTH / 2 + 100, y: WINDOW_HEIGHT / 2 - 100 },
  useNativeDriver: true,
});
const topRight = Animated.timing(position, {
  toValue: { x: WINDOW_WIDTH / 2 - 100, y: -WINDOW_HEIGHT / 2 + 100 },
  useNativeDriver: true,
});
const bottomRight = Animated.timing(position, {
  toValue: { x: WINDOW_WIDTH / 2 - 100, y: WINDOW_HEIGHT / 2 - 100 },
  useNativeDriver: true,
});
const center = Animated.timing(position, {
  toValue: 0,
  useNativeDriver: true,
});

const moveEverywhere = () => {
  Animated.loop(
    Animated.sequence([topLeft, bottomLeft, bottomRight, topRight, center])
  ).start();
};
```

ì‹¤í–‰í•˜ê³  ì‹¶ì€ ì• ë‹ˆë©”ì´ì…˜ì„ ë³€ìˆ˜ì— ì €ì¥í•˜ê³ , `Animated.sequence`ì— ì‹¤í–‰í•˜ê³  ì‹¶ì€ ìˆœì„œëŒ€ë¡œ ë°°ì—´ì— ë‹´ì•„ ë„˜ê²¨ì£¼ë©´ ìš”ì²­í•œ ì• ë‹ˆë©”ì´ì…˜ì´ ì—°ë‹¬ì•„ì„œ ì‹¤í–‰ëœë‹¤.
