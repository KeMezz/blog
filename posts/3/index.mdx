---
emoji: ğŸ¤
title: ë¦¬ì•¡íŠ¸ ë„¤ì´í‹°ë¸Œì—ì„œ ì œìŠ¤ì³ ê°ì§€í•˜ê¸°
date: "2023-01-23"
tags: ["ê°œë°œ", "react-native", "panresponder", "valuexy", "offset"]
slug: 3
---

## PanResponder

```jsx
const panResponder = useRef(PanResponder.create({})).current;
console.log(panResponder);
```

PanResponderë¥¼ ì‚¬ìš©í•˜ë©´ ì†ê°€ë½ì˜ ì œìŠ¤ì²˜, ì›€ì§ì„ ë“±ì„ í™œìš©í•œ ì• ë‹ˆë©”ì´ì…˜ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. `PanResponder.create()`ë¥¼ í†µí•´ ì…ë§›ì— ë§ëŠ” ì œìŠ¤ì²˜ë¥¼ ì„¤ì •í•˜ì—¬ ì„ ì–¸í•  ìˆ˜ ìˆìœ¼ë©°, ì¼ë°˜ì ì¸ ê²½ìš°ì—ëŠ” useRefë¥¼ ì´ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ì‹œ ìœ ë°œë˜ëŠ” ê°’ ì´ˆê¸°í™”ë¥¼ ë°©ì§€í•´ì¤„ í•„ìš”ê°€ ìˆë‹¤.

```jsx
const panResponder = useRef(PanResponder.create({})).current;
return (
  <Container>
    <AnimatedBox {...panResponder.panHandlers} />
  </Container>
);
```

`PanResponder` ë‚´ë¶€ì˜ `panHandlers`ì—ëŠ” ì œìŠ¤ì²˜ë¥¼ ìœ„í•œ ìˆ˜ë§ì€ ë‚´ì¥í•¨ìˆ˜ë¥¼ í¬í•¨í•˜ê³  ìˆìœ¼ë©°, ìœ„ì²˜ëŸ¼ Animated View Componentì— ë„˜ê²¨ì£¼ëŠ” ì‹ìœ¼ë¡œ ì œìŠ¤ì²˜ ì‚¬ìš© ë“±ë¡ì´ ê°€ëŠ¥í•˜ë‹¤.

[PanResponder | React Native Docs](https://reactnative.dev/docs/panresponder)

### onStartShouldSetPanResponder

```jsx
const panResponder = useRef(
  PanResponder.create({
    onStartShouldSetPanResponder: () => true,
  })
).current;
```

ë‹¤ì‹œ PanResponderì˜ ì„¤ì •ìœ¼ë¡œ ëŒì•„ì™”ë‹¤. `onStartShouldSetPanResponder`ì—ì„œëŠ” PanResponderì˜ ì‚¬ìš©ì„ ì‹œì‘í•  ê²ƒì¸ì§€ ì•„ë‹Œì§€ë¥¼ ë¶ˆë¦¬ì–¸ ë°˜í™˜ìœ¼ë¡œ ê²°ì •ì‹œí‚¨ë‹¤. íŠ¹ì •í•œ ìƒí™©ì— ë„ë‹¬í–ˆì„ ë•Œ ì œìŠ¤ì²˜ì˜ ì‘ë™ì„ ë©ˆì¶”ê³  ì‹¶ë‹¤ë©´ ì´ë¥¼ í™œìš©í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.

ë‹¨ìˆœí•œ í„°ì¹˜ê°€ ì•„ë‹ˆë¼ ë“œë˜ê·¸ì²˜ëŸ¼ ì†ê°€ë½ì˜ ì´ë™ì´ ê°ì§€ë˜ì—ˆì„ ë•Œë§Œ ì œìŠ¤ì²˜ë¥¼ ì‹¤í–‰ì‹œí‚¤ê³  ì‹¶ë‹¤ë©´, `onMoveShouldSetPanResponder`ë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.

### onPanResponderMove

```jsx
const panResponder = useRef(
  PanResponder.create({
    onStartShouldSetPanResponder: () => true,
    onPanResponderMove: (_, gestureState) => {
      // d is for 'distance'.
      position.setValue({ x: gestureState.dx, y: gestureState.dy });
    },
  })
).current;
```

`onPanResponderMove`ë¥¼ í†µí•´ ì œìŠ¤ì²˜ë¥¼ ê°ì§€í–ˆì„ ë•Œì˜ í–‰ë™ì„ ì •í•  ìˆ˜ ìˆë‹¤. ë§¤ê°œë³€ìˆ˜ë¡œ ì œìŠ¤ì³ì— í•„ìš”í•œ `event`ì™€ `gestureState`ë¥¼ ì œê³µë°›ì„ ìˆ˜ ìˆëŠ”ë°, ì†ê°€ë½ì˜ ê¸°ì¤€ì ìœ¼ë¡œë¶€í„°ì˜ ê±°ë¦¬ ë“± ë‹¤ì–‘í•œ ì •ë³´ë¥¼ ì†ì— ë„£ì„ ìˆ˜ ìˆë‹¤. ê·¸ ì™¸ì— ì–´ë–¤ ì •ë³´ë“¤ì´ ë‹´ê²¨ìˆëŠ”ì§€ëŠ” ê³µì‹ë¬¸ì„œë¥¼ ë³´ê±°ë‚˜ ì§ì ‘ `console.log`ë¡œ ì°ì–´ë³´ë©´ ëœë‹¤.

ê·¸ë¦¬ê³  ì´ì²˜ëŸ¼ `Animated.Value`ë¥¼ í”„ë¦¬ì…‹ ì• ë‹ˆë©”ì´ì…˜ ì—†ì´ ë³€ê²½í•˜ê³  ì‹¶ì„ ë•ŒëŠ” ìœ„ì²˜ëŸ¼ `setValue`ë¥¼ ì´ìš©í•˜ë©´ ëœë‹¤. ì•ì—ì„œ í–ˆë˜ ê²ƒì²˜ëŸ¼ `Animated.timing`ì´ë‚˜ `Animated.spring`ìœ¼ë¡œ ë³€ê²½í•˜ë©´ í”„ë¦¬ì…‹ ì• ë‹ˆë©”ì´ì…˜ ë•Œë¬¸ì— ì œìŠ¤ì²˜ì— ë”œë ˆì´ ë“±ì˜ íš¨ê³¼ê°€ ìƒê²¨ì„œ ì „í˜€ ì˜ë„ì¹˜ ì•Šì€ ì• ë‹ˆë©”ì´ì…˜ì´ ìƒì„±ëœë‹¤.

[Animated.ValueXY.setValue | React Native Docs](https://reactnative.dev/docs/animatedvaluexy#setvalue)

### onPanResponderGrant

![ì œìŠ¤ì²˜ë¥¼ í•  ë•Œë§ˆë‹¤ ì˜¤ë¸Œì íŠ¸ê°€ ì¤‘ì‹¬ìœ¼ë¡œ ìˆœê°„ì´ë™í•˜ëŠ” ì˜ìƒ](./1.gif)

ì—¬ê¸°ê¹Œì§€ë§Œ ì„¤ì •í–ˆë‹¤ë©´ ë‘ë²ˆì§¸ ì´ìƒì˜ ì œìŠ¤ì³ê°€ ë©€ì©¡í•˜ê²Œ ì‘ë™í•˜ì§€ ì•ŠëŠ”ë‹¤. ìš°ë¦¬ëŠ” ì œìŠ¤ì²˜ë¥¼ ê°ì§€í•  ë•Œë§ˆë‹¤ `dx`ì™€ `dy`ë¼ëŠ” ê°’ì„ ì–»ì–´ì„œ `setValue` ë©”ì†Œë“œë¥¼ í†µí•´ ê·¸ëŒ€ë¡œ ë®ì–´ì”Œì›Œì£¼ê³  ìˆëŠ”ë°, ì´ `dx`ì™€ `dy` ê°’ì´ ìƒˆë¡­ê²Œ ì œìŠ¤ì²˜ë¥¼ ì‹œì‘í• ë•Œë§ˆë‹¤ 0ìœ¼ë¡œ ëŒì•„ê°€ê¸° ë•Œë¬¸ì´ë‹¤.

ê·¸ ì´ìœ ëŠ” `dx`ì™€ `dy`ì˜ dëŠ” distanceë¥¼ ì˜ë¯¸í•˜ê³ , ì¦‰ ì‚¬ìš©ìê°€ ì œìŠ¤ì²˜ë¥¼ ì‹œì‘í•œ ì´í›„ë¡œ ì–¼ë§ˆë‚˜ ì¢Œí‘œë¥¼ ì›€ì§ì˜€ëŠ”ì§€ì— ëŒ€í•œ ê°’ì´ê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ í•˜ë‚˜ì˜ ì œìŠ¤ì³ë¥¼ ì¢…ë£Œí•˜ê³  ë‘ ë²ˆì§¸ ì œìŠ¤ì³ë¥¼ ì‹œì‘í• ë•ŒëŠ” ë‹¤ì‹œ ì†ê°€ë½ì´ ì²˜ìŒ ë‹¿ëŠ” ìœ„ì¹˜ì—ì„œë¶€í„° ì–¼ë§ˆë‚˜ ì´ë™í–ˆëŠ”ì§€ë¥¼ ê³„ì‚°í•˜ê¸° ë•Œë¬¸ì— ê°’ì´ ì¦‰ì‹œ 0ìœ¼ë¡œ ë˜ëŒì•„ê°€ê³ , ì´ë¥¼ ê·¸ëŒ€ë¡œ xì™€ yì— ëŒ€ì…í•˜ê³  ìˆì—ˆìœ¼ë¯€ë¡œ ìœ„ì™€ ê°™ì€ ì´ìƒí•œ ì í”„ê°€ ì¼ì–´ë‚˜ê²Œ ëœë‹¤.

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” dxì™€ dyê°€ 0ë¶€í„° ì‹œì‘í•˜ì§€ ì•Šê³  ì´ì „ ì œìŠ¤ì³ì—ì„œ ì›€ì§ì˜€ë˜ ë§ˆì§€ë§‰ ê°’ì„ ê¸°ì–µí•˜ë„ë¡ í•´ì•¼í•œë‹¤ëŠ” í•´ê²°ë²•ì„ ë– ì˜¬ë¦´ ìˆ˜ ìˆë‹¤.

```jsx
const panResponder = useRef(
  PanResponder.create({
    /* ... */
    onPanResponderGrant: () => {
      position.setOffset({ x: position.x._value, y: position.y._value });
    },
  })
).current;
```

`dx`ì™€ `dy`ê°€ 0ìœ¼ë¡œ ëŒì•„ê°€ê¸° ì „ì— ì˜¤í”„ì…‹ì„ ì§€ì •í•´ì¤„ ìˆ˜ ìˆëŠ”ë°, ì´ë¥¼ ìœ„í•´ `onPanResponderGrant`ë¼ëŠ” í•¨ìˆ˜ë¥¼ ì´ìš©í•œë‹¤. ì œìŠ¤ì²˜ê°€ ê°ì§€ëœ ì§í›„, ê·¸ë¦¬ê³  ì œìŠ¤ì²˜ê°€ ì‹¤ì œë¡œ ì‹¤í–‰ë˜ê¸° ì „ì— ìˆ˜í–‰ì‹œí‚¤ê³  ì‹¶ì€ í–‰ë™ë“¤ì„ ì§€ì •í•´ì¤„ ìˆ˜ ìˆë‹¤.

`setOffset`ì€ `setValue`ì²˜ëŸ¼ ì§ì ‘ xë‚˜ yì˜ ê°’ì„ ì§€ì •í•˜ëŠ” ëŒ€ì‹ ì—, ì˜¤í”„ì…‹ìœ¼ë¡œì„œì˜ ê°’ì„ ì§€ì •í•´ì¤„ ìˆ˜ ìˆë‹¤. `Animated.ValueXY`ì—ì„œ `x._value`, `y._value` ë“±ì˜ í˜•ì‹ìœ¼ë¡œ ê¸°ì¡´ ê°’ì„ êº¼ë‚´ì˜¬ ìˆ˜ ìˆëŠ”ë°, ì´ë¥¼ ì˜¤í”„ì…‹ìœ¼ë¡œ ì§€ì •í•˜ê²Œ ë˜ë©´ ê°€ì¥ ë§ˆì§€ë§‰ì— ì›€ì§ì˜€ë˜ ìœ„ì¹˜ì˜ ê°’ì„ ì˜¤í”„ì…‹ìœ¼ë¡œ ê³„ì†í•´ì„œ ë¶ˆëŸ¬ì˜¤ëŠ” í˜•íƒœê°€ ëœë‹¤.

[Animated.ValueXY.setOffset | React Native Docs](https://reactnative.dev/docs/animatedvaluexy#setoffset)

### onPanResponderRelease

ì–¼í• ì²˜ìŒ ë‘ ë²ˆì€ ì˜ ì‘ë™í•˜ëŠ” ë“¯ í•˜ì§€ë§Œ ì—¬ëŸ¬ ë²ˆ ì œìŠ¤ì²˜ë¥¼ ì‹œë„í–ˆì„ ë•Œ ì›€ì§ì„ì´ ë‹¤ì‹œ ì´ìƒí•˜ê²Œ ë°”ë€Œì–´ë²„ë¦°ë‹¤. ì›€ì§ì„ì´ ê°ì§€ë  ë•Œë§ˆë‹¤ ì˜¤í”„ì…‹ì„ ì¶”ê°€í•˜ë‹ˆ ì ì  ì²« ì‹œì‘ ìœ„ì¹˜ê°€ ë’¤í‹€ë¦¬ëŠ” ê²ƒì´ë‹¤. ë”°ë¼ì„œ ì œìŠ¤ì³ê°€ ì¢…ë£Œë  ë•ŒëŠ” `dx`ì™€ `dy`ì—ê²Œ ì´ì „ì— ì´ë™í•œ ë§Œí¼ì˜ ì¢Œí‘œ ì˜¤í”„ì…‹ì„ ë”í•´ì£¼ëŠ” í•œí¸ìœ¼ë¡œ, ë‹¤ìŒ ì œìŠ¤ì²˜ê°€ ì‹œì‘í•  ë•ŒëŠ” í•´ë‹¹ ì˜¤í”„ì…‹ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í•˜ë„ë¡ 0ìœ¼ë¡œ ë°”ê¾¸ì–´ì£¼ëŠ” í‰íƒ„í™”(flatten) ì‘ì—…ì´ í•„ìš”í•˜ë‹¤.

```jsx
const panResponder = useRef(
  PanResponder.create({
    /* ... */
    onPanResponderRelease: () => {
      position.flattenOffset();
    },
  })
).current;
```

![ì •ìƒì ìœ¼ë¡œ ì œìŠ¤ì³ê°€ ì‘ë™í•˜ëŠ” ì˜ìƒ](./2.gif)

`onPanResponderRelease`ë¥¼ ì´ìš©í•˜ë©´ ì‚¬ìš©ìê°€ ì œìŠ¤ì²˜ë¥¼ ì¢…ë£Œí–ˆì„ ë•Œ ì‹¤í–‰í•  í•¨ìˆ˜ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. ì—¬ê¸°ì—ì„œ ì˜¤í”„ì…‹ ê°’ì„ í‰íƒ„í™”í•˜ë©´ ëœë‹¤.

[Animated.ValueXY.flattenOffset | React Native Docs](https://reactnative.dev/docs/animatedvaluexy#flattenoffset)
