---
emoji: 🧠
title: 사내 고객 관리 시스템 개발 회고록
date: "2023-05-05"
tags: ["개발", "생각", "회고록"]
slug: 2305050
---

이 글은 특정 프로젝트에 대한 회고록이다. 지금은 권고사직으로 그만 둔 모 회사에서 약 8개월 간 사내 고객 관리 시스템을 개발하고 유지보수 했던 경험이 있는데, 지금까지 회사 경험이 별로 없는 편임에도 나름대로 재미있고 유니크한 경험이었다는 생각이 들어 앞으로 더 기억이 사라지기 전에 당시의 개발 과정들을 기억나는 대로 기록해둘까 한다. 혹시라도 어떠한 사정에 의해 클라이언트와 굉장히 캐주얼한 방식으로 소통을 해야하는 처지에 놓인 개발자나 이제 막 어드민 시스템을 만들어야 하는 주니어 개발자들에게 도움이.. 되려나..? 잘 모르겠지만 여튼 내 경험을 공유해보겠다!

## 기술 선택

지금은 Next.js나 Gatsby 등의 리액트 프레임워크를 이용한 개발이 더 익숙하지만 작년까지만 해도 개인적으로는 그러한 프레임워크의 기능들을 잘 이해하고 있지 못했다. 그래도 배워보고 싶은 마음에 프로젝트 시작 전에 프론트엔드는 Next.js를, 백엔드는 Nest.js를 이용하여 각각 개발해보고 싶다는 의견을 가볍게 내기는 했으나 이래저래 팀원들과 상의한 끝에 모두가 잘 다룰 줄 아는 **CRA와 Express.js를 사용하기로 결정**하였다. 실질적으로 프론트쪽은 혼자 개발을 맡은 프로젝트이긴 했지만, 유사 시에는 팀원들과 함께 작업해야 하는 일이 생길텐데 새로운 기술 때문에 나뿐만 아니라 모두의 발목을 잡을 수는 없었고 회사 측에서도 되도록 빨리 진행하고 싶어했기 때문에 기술적인 문제로 너무 시간을 낭비할 수는 없었다.

그렇다고 해서 아주 나쁜 결정도 아니었던 것이, 지금 생각해봐도 어차피 사내에서만 사용하는 시스템이기 때문에 어느 정도 클라이언트의 이해를 구하기도 쉬웠고, SSR 등의 기능을 굳이 사용할 필요도 없었기 때문에 결과적으로는 최선의 결정이었다고 생각한다.

## 리액트 테이블 (TanStack Table v8)

약 10만명이 넘는 고객 정보를 클라이언트가 원하는 기준에 따라 정렬하려면 그에 맞는 적절한 기능이 추가된 테이블 시스템을 개발할 필요가 있었다. 처음에는 자체적으로 커스텀 컴포넌트를 개발하여 대응했지만 점점 정렬 기준이나 요구사항이 복잡해지자, 보다 정확하고 빠른 결과를 내기 위해서 리액트 테이블을 도입하게 되었다. 국내에는 최신 버전과 관련된 레퍼런스가 거의 없어서 적용 초기에는 진통이 있었으나 그래도 어찌저찌 일주일 정도만에 마이그레이션을 마칠 수 있었다. 덕분에 성능적으로나 기능적으로 굉장히 만족스러웠고 클라이언트에게도 굉장히 호평 받은 기능 중에 하나였다.

다만 지금 생각해보면 **다른 팀원들에게 생소한 라이브러리를 도입한 사실에 대해서는 굉장히 후회**하고 있다. 필수 기능에 대한 문서화를 굉장히 신경쓰며 작업하기는 했으나, 좀 더 회사의 규모가 커서(?) 팀원들끼리 업무를 떠나 순수하게 기술에 대한 대화를 더 자주 나눌 수 있는 환경이었다면 미리 라이브러리의 장점에 대해 어필하여 미리 설득하는 과정을 거치거나 혹은 완전히 다른 해결법을 찾았을 수도 있었을 것 같다. 그래도 **생소한 라이브러리를 공식 문서만을 참고해 직접 글로 정리해가며 처음부터 공부해서 적용할 수 있었던 것은 스스로에게는 너무나도 소중한 경험**이었다고 생각한다! 앞으로도 새로운 기술을 배울 필요가 생길 때 스스로의 힘으로 차근히 공부해나갈 수 있는 능력을 기를 수 있게 된 것 같다.

## 에러 핸들링

**타입스크립트를 사용하지 않았기 때문에** 초반에 에러 핸들링에 상당히 애를 먹었는데 오류가 발생해도 원인을 찾는데 오래걸려서 시간을 많이 허비하곤 했다. API 요청 URL의 종류가 워낙 많아서, 코드를 작성하다가 catch 문을 빼먹는 등의 실수를 하는 경우가 주로 생기는 것이다. 이는 **`axios`의 `interceptors` 기능을 이용하여 일괄적으로 응답 오류 발생시 반드시 로그와 함께 사용자에게 모달을 통해 오류 내용을 안내하도록 처리**하였다. 백엔드와 미리 API 명세를 정리하여 주고 받기는 했어도 종종 SQL의 컬럼 글자수 제한 같은 문제로 인해 예상치 못한 응답을 받게 되면 프론트엔드 페이지가 전부 하얗게 떠버리는 (주로 예상했던 응답 객체의 값을 불러오지 못해서 일어난다) 증상이 왕왕 발생했기 때문이다. 일일히 마저 catch 문을 달아주어도 됐겠지만 axios에 좋은 기능이 있었기 때문에 활용하여 해결했다. 또한 이 기능은 후술할 선언적인 모달 호출 시스템을 구축한 덕분에 가능하기도 했다.

고객 정보 관리라는 프로젝트 특성상 form을 활용할 일이 정말 많았는데, 이는 `react-hook-form` 라이브러리를 적극적으로 활용하여 폼에서 이뤄질 수 있는 수많은 기믹들을 전부 처리할 수 있었다. 거의 모든 폼이 read-only 모드와 editable 모드를 오갈 수 있도록 했기 때문에 이러한 기능적인 state 관리만 직접 해주면 **인풋 내용에 대한 것들은 `react-hook-form`이 전부 알아서 기억해주어서 코드가 정말정말 간결해질 수 있었다.** 또 백엔드와 유효성 검사 처리하는 기준을 통일시켜서 잘못된 입력값은 이중적으로 막아내는 시스템을 구축할 수 있었다.

## 로그인 권한 검증

사내 고객 관리 시스템 개발은 기존에 구글 독스의 액셀 프로그램으로 관리하던 것을 자체 웹 앱을 통해 할 수 있도록 마이그레이션 하는 느낌의 개발이었는데, 기존 시스템에서 절대 불가능했던 것 중 하나가 직급에 따른 접근 제한이었다. 민감한 개인 정보를 다루는 시스템이기 때문에 **직급에 따라 아예 특정 메뉴에는 접근할 수 없도록 하거나 직급별 전용 메뉴를 제작**할 필요가 있었고, **본인이 담당하지 않는 고객의 민감 정보는 전부 마스킹 처리**를 해주었으면 좋겠다는 요구사항도 있었다. 이를 위해 직원 계정 정보에 직급과 팀 정보를 수치화하여 저장할 필요가 있었고, 프론트엔드에서도 이러한 정보에 따라 표시되는 UI가 달라져야 했는데 이를 만드는 과정이 꽤나 재미있었다. 당시의 나는 JWT가 뭔지도 모르는 사람이었지만.. 이 프로젝트의 로그인 기능 구현 과정을 통해서 작동 원리를 이해하는데 많이 도움을 얻었다. 백엔드에서 매 요청 때마다 정보 일치를 검증해 준 덕분에 악의적인 이용자가 임의로 본인의 정보를 조작하여 높은 권한을 탈취하려 시도하더라도 사전에 막을 수 있었다. 굳이 토큰을 헤더를 통해 받으려고 해서 애를 먹었던 기억이 난다..

## 디자인 시스템

솔직히 디자인 시스템 개발이라고 할 만큼 숙련된 개발자가 아니기 때문에 애매하지만,, 그래도 자주 사용하는 UI 컴포넌트들을 스스로의 필요에 의해 효율적으로 재사용할 수 있도록 정리한 것은 좋은 경험이 되었던 것 같다. 오버레이나 모달 같은 컴포넌트는 미리 루트에 렌더해두고 표시 여부와 내용을 담은 객체를 recoil에 저장하여 어디서든 선언적으로 사용할 수 있도록 만들기도 하였다. 이 과정에서 **재사용 가능한 구조를 만드는 것이 곧 확장하기 쉬운 시스템을 만드는 것과 같다는 사실을 체득**하기도 했는데, 이렇게 구축해놓고 나니까 이후에 추가적인 페이지 제작 요청이 들어와도 금방금방 만들어낼 수 있어서 편했다. 다만 지금 생각해보면 타입스크립트를 통해 재사용 컴포넌트들의 명세를 일관적이고 보기 쉽게 정리할 수 있었다면 더 좋았을 것 같다는 아쉬움은 남는다.

## 소통

소통이야말로 이 프로젝트의 정말 재밌는 부분이었다고 생각하는데, 실제로 이 서비스를 이용할 회사의 직원들에게 어떤 기능이 필요한지 직접 들으면서 요구 사항을 정리할 수 있었다. 이게 어떻게 보면 재밌는 경험이고 또 어떻게 보면 지옥같은 일인데.. 우리 프로젝트에 전담 기획자가 있었다면 요구사항 수리를 완벽하게 해주셨겠지만 아쉽게도 기획자 분들이 모두 다른 프로젝트에 모두 투입이 되어있던 상황이라 개발자가 직접 클라이언트와 소통하며 요구사항을 파악해야 했다.

그런데 이 요구사항이 아마도 일반적인 형태가 아니었는데, 회사 사정상 클라이언트와 체계적으로 혹은 주기적으로 소통할 수가 없어서 어느 날 어느 시간 돌연히 물밀듯이 요구사항을 넘겨주고 홀연히 떠나는 경우가 많았다. 정해진 소통 창구가 있는 것도 아니어서 나에게 올 때도 있고 다른 개발자나 부장님에게 요구사항이 가는 경우도 있었다. (그리고 나중에 여쭤보면 언제 그런 요청을 했었냐고 기억이 나지 않는다고 하신 적도 많다 ㅎㅎㅎ) 그래서 팀원들끼리 일단 들어오는 모든 요구사항을 전부 문서로 정리해놓고, MVP를 위해 추리는 과정을 거쳤다. 넘치는 요구사항 중에서도 이 프로젝트를 만드는 핵심적인 목표를 우선적으로 달성하고 그 다음에 추가로 들어오는 요청들은 중요도 순으로 모두 정리했다. 팀 전체가 노션을 이용했기 때문에 이러한 흐름을 파악하기도 정말 쉬웠던 것 같다.

그리고 배포 이후에는 실무자들 앞에서 직접 데모를 통해 기능들을 시연하며 발표하는 자리도 가졌다. 배포 이후에는 매 1~2주 간격으로, 앞서 정리했던 우선순위 기준에 맞게 기능 개선을 해나갔다. 매번 버전이 릴리즈 될 때마다 변경사항을 모두 문서화해두어 프로젝트에 전혀 관여하지 않은 사람이 봐도 언제 어떤 기능이 추가되었는지 알기 쉽게 하였다.

프로젝트 초반에는 클라이언트의 이런 소통 방식에 너무나도 좌절했었는데, 오히려 기폭제가 됐던 것 같다. (그럴 일은 없겠지만 이런 클라이언트를 만나면 가능하다면 도망가는게 정답이지 싶다 ㅎㅎ) 정리되지 않은 채로 공중에 둥둥 떠다디는 요구사항들을 내버려 두는 것은 도저히 참을 수가 없었기 때문에 팀원들과 한 마음으로 모든 요구 사항들을 정리하고 공유하기 시작했고, 그 이후로는 프로젝트가 술술 풀리는 경험을 할 수 있었다.

## 정리하며..

좀 더 적을만한 내용이 있었던 것 같은데 사실 시간이 지나서 세세하게 기억이 나지는 않는다. 그리고 재미있었다고는 했지만 혼자 였으면 도무지 해낼 수 있을 것 같지 않다.. 함께 했던 동료들에게 조언과 협력을 받아가며 했던 프로젝트였기에 나름 곤란한(?) 상황 속에서도 어찌저찌 잘 헤쳐나갈 수 있었지 않았나싶다! 또, 클라이언트와의 캐주얼한 소통이 잦았던 만큼 비개발자가 이해하기 쉽도록 설명하는 방법에 대해서도 많이 깨달을 수 있었던 것 같다. 무엇보다 당시 그다지 체계적일 수 있는 환경이 아니었는데도 팀원들끼리 최대한 무너진 체계를 다시 세우기 위해 노력했었던 경험들이 정말 값진 것 같다.
