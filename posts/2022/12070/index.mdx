---
emoji: ğŸ‘Ÿ
title: Gatsby.js Basics
date: "2022-12-07"
tags: ["ê°œë°œ", "gatsby"]
slug: 2212070
---

## useStaticQuery

```typescript
const data = useStaticQuery<Queries.SeoDataQuery>(graphql`
  query SeoData {
    site {
      siteMetadata {
        title
      }
    }
  }
`);
```

useStaticQueryë€, ë§ ê·¸ëŒ€ë¡œ ì •ì ì¸ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•  ë•Œ ì“°ëŠ” í›…ì´ë‹¤. ê°œì¸ ë¹„ëŠ” ìš°ë¦¬ê°€ GraphQLì„ í†µí•´ ì¿¼ë¦¬ë¥¼ ê°€ì ¸ì˜¤ë©´ ìë™ìœ¼ë¡œ í•´ë‹¹ ì¿¼ë¦¬ì— ëŒ€í•œ íƒ€ì… êµ¬ì¡°ë¥¼ ë§Œë“¤ì–´ì£¼ê¸° ë•Œë¬¸ì— Queries ë‚´ë¶€ì—ì„œ ì¼ì¹˜í•˜ëŠ” ë°ì´í„°ë¥¼ ì°¾ì•„ì„œ íƒ€ì´í•‘ì„ í•´ì¤„ ìˆ˜ë„ ìˆë‹¤. useStaticQueryë¥¼ í†µí•´ ê°€ì ¸ì˜¨ ë°ì´í„°ëŠ” í”„ë¡œì íŠ¸ ë¹Œë“œ ì‹œì— ë¯¸ë¦¬ ë¶ˆëŸ¬ì™€ì ¸ HTML íŒŒì¼ì— ì •ì ìœ¼ë¡œ ë‚¨ê²Œ ëœë‹¤.

## Page Query

```sh
npm install gatsby-source-filesystem
```

```typescript
// In gatsby-config.ts
const config: GatsbyConfig = {
  plugins: [
    {
      resolve: `gatsby-source-filesystem`,
      options: {
        name: `posts`,
        path: `${__dirname}/posts`,
      },
    },
  ],
};
```

ê°œì¸ ë¹„ í”ŒëŸ¬ê·¸ì¸ `gatsby-source-filesystem`ì„ ì„¤ì¹˜í•˜ê³  ìœ„ì™€ ê°™ì´ íŒŒì¼ì‹œìŠ¤í…œì„ ì„¤ì •í•˜ê³  ì‹¶ì€ í´ë” ê²½ë¡œì™€ ì—°ê²°ì‹œì¼œì¤€ë‹¤.

```typescript
import { graphql } from "gatsby";

export const query = graphql`
  query BlogTitles {
    allFile {
      nodes {
        name
      }
    }
  }
`;
```

ë°ì´í„°ë¥¼ ì‚¬ìš©í•  í˜ì´ì§€ ì•ˆì—ì„œ ì¿¼ë¦¬ë¬¸ì„ í†µí•´ ê°€ì ¸ì˜¤ê³  ì‹¶ì€ ë°ì´í„° êµ¬ì¡°ë¥¼ ì‘ì„±í•˜ê³ , `query`ë¼ëŠ” ë³€ìˆ˜ëª…ìœ¼ë¡œ ì„ ì–¸í•œë‹¤.

```typescript
import { PageProps } from "gatsby";

function Blog({ data }: PageProps<Queries.BlogTitlesQuery>) {
  console.log(data);
  return (
    <Layout title="Blog">
      <ul>
        {data.allFile.nodes.map((file, index) => (
          <li key={index}>{file.name}</li>
        ))}
      </ul>
    </Layout>
  );
}
```

ê·¸ëŸ¬ë©´ ê°œì¸ ë¹„ í”„ë ˆì„ì›Œí¬ì˜ ë£°ì— ë”°ë¼, í•´ë‹¹ í˜ì´ì§€ì—ì„œ dataë¡œ ê°€ì ¸ì˜¤ê¸°ë§Œ í•´ë„ ë°”ë¡œ ì¿¼ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë‹¤.

> [gatsby-source-filesystem | Gatsby Plugins](https://www.gatsbyjs.com/plugins/gatsby-source-filesystem/)

## MDX

```sh
npm install gatsby-plugin-mdx gatsby-source-filesystem @mdx-js/react
```

```typescript
// In gatsby-config.ts
const config: GatsbyConfig = {
  plugins: [
    `gatsby-plugin-mdx`,
    {
      resolve: `gatsby-source-filesystem`,
      options: {
        name: `posts`,
        path: `${__dirname}/posts`,
      },
    },
  ],
};
```

mdx í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•˜ê³  ìœ„ì™€ ê°™ì´ ì„¤ì •ì„ ì¡ì•„ì¤€ë‹¤.

```mdx
## // In MDX files

title: íšŒì‚¬ ì§¤ë ¸ë‹¤
date: "2022-11-25"
description: ì´ì œ ì¶œê·¼ ì•ˆí•´ë„ ëœë‹¤
tech: ["React"]
slug: 1

---
```

mdx íŒŒì¼ ìƒë‹¨ì— frontmatterë¥¼ ì‘ì„±í•´ì¤€ë‹¤. ìœ„ì²˜ëŸ¼ ì‘ì„±í•´ì£¼ë©´ ê°œì¸ ë¹„ê°€ ì•Œì•„ì„œ ì¿¼ë¦¬ êµ¬ì¡°ë¥¼ ìƒì„±í•´ì¤€ë‹¤.

```typescript
// In /blog/index.tsx
export const query = graphql`
  query BlogPosts {
    allMdx {
      nodes {
        frontmatter {
          title
          date(formatString: "YYYYë…„ MMì›” DDì¼")
          description
          tech
          slug
        }
        excerpt
      }
    }
  }
`;
```

/blogì˜ ì¸ë±ìŠ¤ í˜ì´ì§€ì—ì„œ íŒŒì¼ë³„ë¡œ ëª¨ë“  ë°ì´í„°ë¥¼ ì¿¼ë¦¬ë¬¸ìœ¼ë¡œ ë°›ì•„ì˜¬ ìˆ˜ ìˆê²Œëœë‹¤. í•œ ê°€ì§€ ë…íŠ¹í•œ ì ì€ dateë¥¼ í¬ë§·íŒ…í•´ì„œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤ëŠ” ì .

```typescript
// In /blog/{mdx.frontmatter__slug}.tsx
interface IBlogPosts {
  data: Queries.PostDetailQuery;
  children: ReactElement | ReactElement[];
}

export default function BlogPosts({ data, children }: IBlogPosts) {
  return (
    <Layout title={data.mdx?.frontmatter?.title!}>
      <div>{children}</div>
    </Layout>
  );
}

export const query = graphql`
  query PostDetail($frontmatter__slug: Int) {
    mdx(frontmatter: { slug: { eq: $frontmatter__slug } }) {
      body
      frontmatter {
        date
        description
        slug
        tech
        title
      }
    }
  }
`;

export const Head = ({ data }: IBlogPosts) => (
  <Seo title={data.mdx?.frontmatter?.title!} />
);
```

`{mdx.frontmatter__slug}`ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ íŒŒì¼ì„ ìƒì„±í•˜ê²Œ ë˜ë©´, ê°œì¸ ë¹„ê°€ ì•Œì•„ì„œ slugì˜ ìˆ˜ë§Œí¼ì˜ í˜ì´ì§€ë¥¼ ìƒì„±í•œë‹¤. ì¿¼ë¦¬ ë³€ìˆ˜ë¥¼ í†µí•´ ì¿¼ë¦¬ë¬¸ì—ì„œë„ slugë¥¼ ê°€ì ¸ë‹¤ ì“¸ ìˆ˜ ìˆê³ , `children`ì—ëŠ” jsxë¡œ ë³€í™˜ëœ mdx íŒŒì¼ì„ ì „ë‹¬ë°›ì„ ìˆ˜ ìˆë‹¤.

> [gatsby-plugin-mdx | Gatsby Plugins](https://www.gatsbyjs.com/plugins/gatsby-plugin-mdx)

## Image

```sh
npm install gatsby-plugin-image gatsby-plugin-sharp gatsby-source-filesystem gatsby-transformer-sharp
```

```typescript
// In gatsby-config.ts
const config: GatsbyConfig = {
  plugins: [
    `gatsby-plugin-image`,
    `gatsby-plugin-sharp`,
    `gatsby-transformer-sharp`,
  ],
};
```

### Static Image

```tsx
<StaticImage src="https://image.com/123" alt="image" />
```

### Dynamic Image

```mdx
## // In MDX files

title: íšŒì‚¬ ì§¤ë ¸ë‹¤
date: "2022-11-25"
description: ì´ì œ ì¶œê·¼ ì•ˆí•´ë„ ëœë‹¤
tech: ["React"]
slug: 1
heroImage: image_1.png

---
```

```tsx
export default function BlogPosts({ data, children }: IBlogPosts) {
  const image = getImage(
    data.mdx?.frontmatter?.heroImage?.childImageSharp?.gatsbyImageData!
  );
  return (
    <Layout title={data.mdx?.frontmatter?.title!}>
      <GatsbyImage image={image as any} alt={data.mdx?.frontmatter?.title!} />
      <div>{children}</div>
    </Layout>
  );
}

export const query = graphql`
  query PostDetail($frontmatter__slug: Int) {
    mdx(frontmatter: { slug: { eq: $frontmatter__slug } }) {
      body
      frontmatter {
        date
        description
        slug
        tech
        title
        heroImage {
          childImageSharp {
            gatsbyImageData(placeholder: BLURRED)
          }
        }
      }
    }
  }
`;
```

### image inside of mdx

```sh
npm install gatsby-remark-images
```

```typescript
// In gatsby-config.ts
const config: GatsbyConfig = {
  plugins: [
    {
      resolve: `gatsby-plugin-mdx`,
      options: {
        gatsbyRemarkPlugins: [
          {
            resolve: `gatsby-remark-images`,
            options: { maxWidth: 600 },
          },
        ],
      },
    },
  ],
};
```

```mdx
// In MDX files
![image_1.png](./image_1.png)
```

> [`gatsby-remark-*`Â plugins | Gatsby Plugins](https://www.gatsbyjs.com/plugins/gatsby-plugin-mdx/?=mdx#gatsby-remark--plugins)
