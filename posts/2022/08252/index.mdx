---
emoji: ğŸ’¿
title: TanStack React Table v8 - ì»¬ëŸ¼ í•„í„°
date: "2022-08-25"
tags: ["ê°œë°œ", "react", "react-table"]
slug: 2208252
---

https://codesandbox.io/s/react-table-example-filtering-zhetr8?from-embed

`react-table`ì˜ í•„í„°ëŠ” í¬ê²Œ ë‹¤ìŒì˜ [ë‘ ê°€ì§€ ì¢…ë¥˜](https://tanstack.com/table/v8/docs/guide/filters#overview)ë¡œ ë‚˜ë‰©ë‹ˆë‹¤. ë³¸ ë¬¸ì„œì—ì„œëŠ” Column Filterë¥¼ ìœ„ì£¼ë¡œ ë‹¤ë£° ì˜ˆì •ì…ë‹ˆë‹¤.

1. `Column Filters` : í•œ ì»¬ëŸ¼ì˜ accessor ê°’ì—ë§Œ ì ìš©ë˜ëŠ” í•„í„°. `state.columnFilters`ì— `columnId`ì™€ í•¨ê»˜ `array` íƒ€ì…ìœ¼ë¡œ ì €ì¥ëœë‹¤.
2. `Global Filters` : ì „ì²´ ì»¬ëŸ¼ì˜ accessor ê°’ì— ì ìš©ë˜ëŠ” í•„í„°. `state.globalFilters`ì— `any` íƒ€ì…ìœ¼ë¡œ ì €ì¥ëœë‹¤. (ëŒ€ë¶€ë¶„ `string`)

## Column Defs ì„¤ì •

### enableColumnFilter

```jsx
const columns = [
  columnHelper.accessor("name", {
    header: "ì´ë¦„",
    enableColumnFilter: true,
  }),
  columnHelper.accessor("phone", {
    header: "íœ´ëŒ€í°",
    enableColumnFilter: false,
  }),
  /* ... */
];
```

[ì •ë ¬](https://velog.io/@kemezz/TanStack-React-Table-v8-%EC%A0%95%EB%A0%AC%ED%8E%B8#enablesorting)ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ `enableColumnFilter` ì˜µì…˜ì„ í†µí•´ ì»¬ëŸ¼ì— ì»¬ëŸ¼ í•„í„° ê¸°ëŠ¥ì„ ì‚¬ìš©í• ì§€ ì‚¬ìš©í•˜ì§€ ì•Šì„ì§€ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ ê¸°ë³¸ê°’ì´ `true`ì…ë‹ˆë‹¤.

### filterFn

```jsx
const columns = [
  columnHelper.accessor("name", {
    header: "ì´ë¦„",
    filterFn: "equalsString",
  }),
];
```

`filterFn` ì˜µì…˜ì„ í†µí•´ í•„í„° í•¨ìˆ˜ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. react-tableì—ì„œ ì œê³µí•˜ëŠ” [10ê°œì˜ ê¸°ë³¸ í•„í„°ë§ í•¨ìˆ˜](https://tanstack.com/table/v8/docs/api/features/filters#filter-functions) ì´ë¦„ ì¤‘ í•˜ë‚˜ë¥¼ ìŠ¤íŠ¸ë§ í˜•íƒœë¡œ ë„˜ê¸°ê±°ë‚˜, ì»¤ìŠ¤í…€ í•„í„°ë¥¼ ì‘ì„±í•˜ì—¬ ë„˜ê¸°ëŠ” ê²ƒë„ ê°€ëŠ¥í•©ë‹ˆë‹¤. [ê³µì‹ ë¬¸ì„œ](https://tanstack.com/table/v8/docs/api/features/filters#table-options)ì— ì»¤ìŠ¤í…€ í•„í„°ë¥¼ ì‘ì„±í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì†Œê°œí•˜ëŠ” ë¶€ë¶„ì´ ìˆìœ¼ë¯€ë¡œ ì°¸ê³  ë°”ëë‹ˆë‹¤.

## Table ì„¤ì •

### getFilteredRowModel, getFacetedUniqueValues

```jsx
import {
  getCoreRowModel,
  getFilteredRowModel,
  getFacetedUniqueValues
  useReactTable,
} from "@tanstack/react-table";
/* ... */
const table = useReactTable({
  data,
  columns,
  getCoreRowModel: getCoreRowModel(),
  getFilteredRowModel: getFilteredRowModel(),
  getFacetedUniqueValues: getFacetedUniqueValues(),
})
```

`getFilteredRowModel` í•¨ìˆ˜ë¥¼ ì„í¬íŠ¸í•˜ì—¬ í…Œì´ë¸” ì„ ì–¸ ì‹œ í•¨ê»˜ ë³´ë‚´ì£¼ì–´ì•¼ í•„í„°ë§ëœ Row Modelë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `getFacetedUniqueValues`ëŠ” ê° ì»¬ëŸ¼ ì•ˆì— ìˆëŠ” uniqueí•œ valueë“¤ì„ ì¢…ë¥˜ë³„ë¡œ ì¶œë ¥í•´ì£¼ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. ì»¬ëŸ¼ë³„ë¡œ í•„í„° ëª©ë¡ì„ ì¶œë ¥í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

[TanStack Table v8 Documents | getFilteredRowModel](https://tanstack.com/table/v8/docs/api/features/filters#getfilteredrowmodel-1)

[TanStack Table v8 Documents | getFactedUniqueValues](https://tanstack.com/table/v8/docs/api/features/filters#getfaceteduniquevalues)

## í•„í„°ë§ í•¨ìˆ˜ ì ìš©

### getFacetedUniqueValues

```jsx
// App.js
<thead>
  {table.getHeaderGroups().map((headerGroup) => (
    <tr key={headerGroup.id}>
      {headerGroup.headers.map((header) => (
        <TableHeader header={header} key={header.id} />
      ))}
    </tr>
  ))}
</thead>
```

```jsx
// TableHeader.jsx
function TableHeader({ header }) {
  const sortedUniqueValues = useMemo(
    () => Array.from(header.column.getFacetedUniqueValues().keys()).sort(),
    [header.column]
  );

  return (
    <th
      key={header.id}
      style={{
        width: header.getSize(),
        cursor: header.column.getCanSort() ? "pointer" : "default",
      }}
      onClick={header.column.getToggleSortingHandler()}
    >
      {header.isPlaceholder
        ? null
        : flexRender(header.column.columnDef.header, header.getContext())}
      {
        {
          asc: <FaSortUp />,
          desc: <FaSortDown />,
        }[header.column.getIsSorted()]
      }
      {header.column.getCanSort() && !header.column.getIsSorted() ? (
        <FaSort />
      ) : null}
    </th>
  );
}
```

ì»¬ëŸ¼ë³„ unique valueë¥¼ ì¶”ì¶œí•˜ê¸° ìœ„í•´ ë¨¼ì € í—¤ë” ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶„ë¦¬í•´ì¤ë‹ˆë‹¤. `getFacetedUniqueValues` í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ë©´ ì •ë§ ê°„ë‹¨í•˜ê²Œ ê° ì»¬ëŸ¼ì˜ unique valueë“¤ì„ ë°°ì—´ë¡œ ì¶œë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### getCanFilter, setFilterValue

```jsx
// TableHeader.jsx
const onFilterChange = (value) => {
  if (value === "null") {
    header.column.setFilterValue(null);
  } else {
    header.column.setFilterValue(value);
  }
};
```

```jsx
// TableHeader.jsx
{
  header.column.getCanFilter() ? (
    <select onChange={({ currentTarget: { value } }) => onFilterChange(value)}>
      <option value="null">ì„ íƒ ì•ˆí•¨</option>
      {sortedUniqueValues.map((value) => (
        <option key={value}>{value}</option>
      ))}
    </select>
  ) : null;
}
```

`getCanFilter`ëŠ” í•´ë‹¹ ì»¬ëŸ¼ì´ í•„í„°ë§ ê°€ëŠ¥í•œ ì»¬ëŸ¼ì¸ì§€ ì•„ë‹Œì§€ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¡œ, ì—¬ê¸°ì„œëŠ” í•„í„°ë§ì´ ë¶ˆê°€ëŠ¥í•œ ì»¬ëŸ¼ì—ëŠ” í•„í„°ë§ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ í‘œì‹œí•˜ì§€ ì•Šê¸° ìœ„í•´ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. `setFilterValue`ëŠ” í•„í„°ê°’ì„ ì§€ì •í•´ì£¼ëŠ” í•¨ìˆ˜ë¡œ, ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ í•„í„°ê°’ì„ ì§€ì •í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆì œì—ì„œëŠ” ì„ íƒì§€ êµ­ë£°ì¸ select íƒœê·¸ë¥¼ ì´ìš©í•˜ì—¬ unique value ì¤‘ í•˜ë‚˜ë¥¼ filterValueë¡œ ì§€ì •í•  ìˆ˜ ìˆëŠ” ë¡œì§ì„ ë§Œë“¤ì–´ë³´ì•˜ìŠµë‹ˆë‹¤. ì´ë¡œì¨ ê°„ë‹¨í•˜ê²Œ í•„í„° ê¸°ëŠ¥ê¹Œì§€ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤!

[TanStack Table v8 Documents | Filters](https://tanstack.com/table/v8/docs/guide/filters#overview)
